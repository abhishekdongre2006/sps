{% if recent_posts %}
    <div class="overflow-x-auto animate-fade-in">
        <table class="w-full text-sm">
            <thead>
                <tr class="border-b-2 border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700">
                    <th class="text-left py-3 px-3 font-bold text-gray-700 dark:text-gray-300">
                        <i class="fas fa-share-alt text-indigo-600"></i> Platform
                    </th>
                    <th class="text-left py-3 px-3 font-bold text-gray-700 dark:text-gray-300">
                        <i class="fas fa-pen text-purple-600"></i> Content
                    </th>
                    <th class="text-left py-3 px-3 font-bold text-gray-700 dark:text-gray-300">
                        <i class="fas fa-calendar text-blue-600"></i> Scheduled
                    </th>
                    <th class="text-left py-3 px-3 font-bold text-gray-700 dark:text-gray-300">
                        <i class="fas fa-check-double text-green-600"></i> Status
                    </th>
                    <th class="text-left py-3 px-3 font-bold text-gray-700 dark:text-gray-300">
                        <i class="fas fa-cog text-gray-600"></i> Actions
                    </th>
                </tr>
            </thead>
            <tbody>
                {% for post in recent_posts %}
                    <tr class="border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200 group">
                        <td class="py-4 px-3">
                            <div class="flex items-center gap-2">
                                {% if 'instagram' in post.social_account.platform %}
                                    <i class="fab fa-instagram text-pink-600 text-xl group-hover:scale-110 transition-transform"></i>
                                    <span class="text-xs font-semibold text-gray-700 dark:text-gray-300">Instagram</span>
                                {% elif 'facebook' in post.social_account.platform %}
                                    <i class="fab fa-facebook text-blue-600 text-xl group-hover:scale-110 transition-transform"></i>
                                    <span class="text-xs font-semibold text-gray-700 dark:text-gray-300">Facebook</span>
                                {% elif 'twitter' in post.social_account.platform %}
                                    <i class="fab fa-twitter text-blue-400 text-xl group-hover:scale-110 transition-transform"></i>
                                    <span class="text-xs font-semibold text-gray-700 dark:text-gray-300">Twitter</span>
                                {% elif 'linkedin' in post.social_account.platform %}
                                    <i class="fab fa-linkedin text-blue-700 text-xl group-hover:scale-110 transition-transform"></i>
                                    <span class="text-xs font-semibold text-gray-700 dark:text-gray-300">LinkedIn</span>
                                {% endif %}
                            </div>
                        </td>
                        <td class="py-4 px-3">
                            <span class="text-gray-700 dark:text-gray-300 truncate block max-w-xs hover:text-clip" title="{{ post.content }}">
                                {{ post.content|truncatewords:8 }}
                            </span>
                        </td>
                        <td class="py-4 px-3 text-gray-600 dark:text-gray-400 text-xs font-medium">
                            {{ post.scheduled_at|date:"M d, H:i" }}
                        </td>
                        <td class="py-4 px-3">
                            <span class="inline-block px-3 py-1 rounded-full text-xs font-bold transition-transform hover:scale-105
                                {% if post.status == 'scheduled' %}
                                    bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-300
                                {% elif post.status == 'success' %}
                                    bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-300 animate-bounce-smooth
                                {% elif post.status == 'failed' %}
                                    bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-300
                                {% else %}
                                    bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300
                                {% endif %}">
                                
                                {% if post.status == 'scheduled' %}
                                    <i class="fas fa-clock"></i> Scheduled
                                {% elif post.status == 'success' %}
                                    <i class="fas fa-check-circle"></i> Success
                                {% elif post.status == 'failed' %}
                                    <i class="fas fa-exclamation-circle"></i> Failed
                                {% else %}
                                    <i class="fas fa-ban"></i> Cancelled
                                {% endif %}
                            </span>
                        </td>
                        <td class="py-4 px-3 flex gap-2">
                            {% if post.status == 'scheduled' %}
                                <form method="post" action="{% url 'cancel_post' post.id %}" style="display: inline;">
                                    {% csrf_token %}
                                    <button type="submit" class="text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 text-xs font-semibold hover:scale-110 transition-transform" title="Cancel">
                                        <i class="fas fa-times"></i> Cancel
                                    </button>
                                </form>
                            {% elif post.status == 'failed' %}
                                <form method="post" action="{% url 'retry_post' post.id %}" style="display: inline;">
                                    {% csrf_token %}
                                    <button type="submit" class="text-yellow-600 dark:text-yellow-400 hover:text-yellow-700 dark:hover:text-yellow-300 text-xs font-semibold hover:scale-110 transition-transform" title="Retry">
                                        <i class="fas fa-redo"></i> Retry
                                    </button>
                                </form>
                                <form method="post" action="{% url 'delete_post' post.id %}" style="display: inline;">
                                    {% csrf_token %}
                                    <button type="submit" class="text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 text-xs font-semibold hover:scale-110 transition-transform" title="Delete">
                                        <i class="fas fa-trash"></i> Delete
                                    </button>
                                </form>
                            {% else %}
                                <form method="post" action="{% url 'delete_post' post.id %}" style="display: inline;">
                                    {% csrf_token %}
                                    <button type="submit" class="text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 text-xs font-semibold hover:scale-110 transition-transform" title="Delete">
                                        <i class="fas fa-trash"></i> Delete
                                    </button>
                                </form>
                            {% endif %}
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% else %}
    <div class="text-center py-16 text-gray-500 dark:text-gray-400 animate-fade-in">
        <i class="fas fa-inbox text-7xl mb-4 opacity-30"></i>
        <p class="text-lg font-semibold mb-2">No posts yet</p>
        <p class="text-sm">Click the button above to schedule your first post! ðŸš€</p>
    </div>
{% endif %}
